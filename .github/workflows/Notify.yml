name: telegram message
on:
  discussion_comment:
    types: [created]
jobs:
  notify:
    name: Notify
    runs-on: ubuntu-latest
    steps:
      - name: get url
        run: |
          IFS=' '
          read -ra strArr <<< "${{ github.event.discussion.body }}"
          echo "url=${strArr[0]}#post-comment" >> $GITHUB_ENV
      # 发送到Telegram
      - uses: colutius/Telegram-Msg@main
        with:
          token: ${{ secrets.TELEGRAM_TOKEN }}
          chatid: ${{ secrets.TELEGRAM_TO }}
          button: true
          button_name: 👀在Github查看👀
          button_url: ${{ github.event.discussion.html_url }}
          message: |
            🌟新评论提醒🌟
            
            ${{ github.event.sender.login }}:
            
            ${{ github.event.comment.body }}

            ${{ env.url }}

